# 연령 인증 시나리오 MVP 구현 계획

## 1. 개요
- **목적**: 사용자의 연령을 검증하고 인증하는 DID 기반 시스템 구현
- **대상 환경**: 로컬 개발 환경
- **데이터 저장소**: SQLite

## 2. 주요 구성 요소
- **발급자(Issuer)**: 연령 정보를 검증하고 VC를 발급하는 주체
- **소유자(Holder)**: 연령 인증 VC를 받고 관리하는 사용자
- **검증자(Verifier)**: 사용자의 연령 인증 VP를 검증하는 서비스

## 3. 핵심 기능
- **DID 생성 및 관리**: 사용자 및 발급자를 위한 DID 생성 및 관리
- **연령 인증 VC 발급**: 사용자의 연령 정보를 검증하고 VC 발급
- **VP 생성 및 제출**: 사용자가 연령 인증 VP를 생성하고 검증자에게 제출
- **VP 검증**: 검증자가 VP의 유효성 및 연령 조건 충족 여부 확인

## 4. 구현 단계
1. **DID 관리 기능 구현**
   - 사용자 및 발급자 DID 생성
   - DID Document 관리 및 저장

2. **연령 인증 VC 발급 시스템 구현**
   - 연령 정보 입력 및 검증 인터페이스
   - VC 발급 및 서명 기능
   - 발급된 VC 저장 및 관리

3. **VP 생성 및 제출 기능 구현**
   - 사용자의 VC 선택 및 VP 생성
   - VP 서명 및 제출 인터페이스

4. **VP 검증 시스템 구현**
   - VP 수신 및 검증 로직
   - 연령 조건 확인 및 결과 표시

5. **사용자 인터페이스 구현**
   - 발급자, 소유자, 검증자 역할별 인터페이스
   - 연령 인증 프로세스 시각화

## 5. 데이터 모델
- **사용자 정보**: 이름, 생년월일, 연락처 등
- **DID 문서**: 사용자 및 발급자의 DID 문서
- **VC 데이터**: 연령 인증 관련 VC 정보
- **VP 데이터**: 제출된 VP 정보 및 검증 결과

## 6. API 엔드포인트
- **/api/did/create**: DID 생성
- **/api/vc/issue/age**: 연령 인증 VC 발급
- **/api/vp/create**: VP 생성
- **/api/vp/verify**: VP 검증

## 7. 사용자 시나리오
1. **사용자 등록 및 DID 생성**
   - 사용자가 시스템에 등록하고 DID 생성

2. **연령 정보 제출 및 VC 발급**
   - 사용자가 연령 정보 제출
   - 발급자가 정보 검증 후 연령 인증 VC 발급

3. **서비스 이용 시 연령 인증**
   - 사용자가 연령 제한 서비스 접근 시 VP 생성
   - 검증자가 VP 검증 후 서비스 접근 허용/거부

## 8. 보안 고려사항
- **개인정보 보호**: 최소한의 필요 정보만 VC에 포함
- **암호화**: 민감 정보 암호화 저장
- **접근 제어**: 적절한 권한 관리

## 9. 구현 로드맵
1. **1단계**: 데이터베이스 설계 및 구축 (1주)
2. **2단계**: DID 관리 및 VC 발급 기능 구현 (2주)
3. **3단계**: VP 생성 및 검증 기능 구현 (2주)
4. **4단계**: 사용자 인터페이스 개발 (2주)
5. **5단계**: 테스트 및 버그 수정 (1주)

## 10. 기술 스택
- **프론트엔드**: Next.js, React 19, TailwindCSS
- **백엔드**: Next.js API Routes
- **데이터베이스**: SQLite
- **DID/VC 라이브러리**: @transmute/did-key.js, @transmute/vc.js
- **암호화**: jose 